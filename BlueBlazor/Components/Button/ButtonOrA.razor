@namespace BlueBlazor.Components
@inherits BlueComponentBase

@if (isButton)
{
    <button @attributes="AdditionalAttributes" @onclick="OnClick" type="@ButtonType?.ToString().ToLower()" class="@Class" style="@Style"
        disabled="@Disabled" popovertarget="@PopoverTarget">
        @ChildContent
    </button>
}
else
{
    <a @attributes="AdditionalAttributes" @onclick="OnClick" href="@Href" class="@Class" style="@Style" disabled="@Disabled"
       target="@Target" rel="@(Target == "_blank" ? "noreferrer" : "")" popovertarget="@PopoverTarget">
        @ChildContent
    </a>

}

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    [Parameter]
    public string? Href { get; set; }

    /// <summary>
    /// `Target="_blank"` will automatically add `rel="noreferrer"` to the anchor tag.
    /// </summary>
    [Parameter]
    public string? Target { get; set; }

    [Parameter]
    public ButtonType? ButtonType { get; set; }

    [Parameter]
    public bool Disabled { get; set; } = false;

    [Parameter]
    public string? PopoverTarget { get; set; }

    protected override void OnParametersSet()
    {
        isButton = Href == null || AdditionalAttributes?.ContainsKey("href") == true;
        StateHasChanged();
    }

    bool isButton = false;
}