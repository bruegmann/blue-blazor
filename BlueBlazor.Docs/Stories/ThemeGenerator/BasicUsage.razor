<div data-bs-theme="@_colorMode" class="d-flex flex-column flex-md-row gap-3">
    <div>
        Select theme info
        <div class="list-group">
            @foreach (var themeInfo in _themeInfos)
            {
                <button type="button" class="list-group-item list-group-item-action"
                        @onclick="() => { _themeInfo = themeInfo; }">
                    @themeInfo.Name
                </button>
            }
        </div>
    </div>

    <div class="p-4 rounded border">
        <ThemeGenerator OnCompile="HandleCompile" ThemeInfo="@_themeInfo" />
    </div>
</div>

<style type="text/css">
    @_css
</style>

@code {
    private string _css = "";
    private string _colorMode = "light";
    private ThemeInfo? _themeInfo;
    private List<ThemeInfo> _themeInfos = [new()
        {
            Name = "Just blue",
            Variables = new Dictionary<string, string> {
                { "$theme", "blue" }
            }
        }, new() {
        Name = "Valentine v9",
        Variables = new Dictionary<string, string> {
            { "$primary", "hsl(0deg 69% 50%)" },
            { "$theme", "hsl(329deg 100% 94%)" },
            { "$form-check-radio-checked-bg-image", "url(\"data:image/svg+xml,%3Csvg%20fill%3D%22%23fff%22%20class%3D%22bi%20bi-suit-heart-fill%22%20viewBox%3D%220%200%2016%2016%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M4%201c2.21%200%204%201.755%204%203.92C8%202.755%209.79%201%2012%201s4%201.755%204%203.92c0%203.263-3.234%204.414-7.608%209.608a.513.513%200%2001-.784%200C3.234%209.334%200%208.183%200%204.92%200%202.755%201.79%201%204%201z%22%2F%3E%3C%2Fsvg%3E\")" },
            { "$form-check-input-checked-bg-image", "url(\"data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2020%2020%22%20style%3D%22background%3A%23fff%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctext%20y%3D%2215%22%3E%F0%9F%92%98%3C%2Ftext%3E%3C%2Fsvg%3E\")" }
        },
        CustomStyle = ".blue-layout-header > header {\n    background-image: url(data:image/svg+xml;base64,PHN2ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIyIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjAgMCAxMDkgNjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iaHNsKDMyOWRlZyA2MCUgODYlKSIgZD0iTTkyLjU4NyAyMi4zNzVjNS4yMjYtMi40MzEgMTAuOTU5Ljg3OSAxMi42NDYgNC41NzcgMS42ODcgMy42OTgtLjY3MiA3Ljc4NC01Ljg5OCAxMC4yMTUtMy43NyAxLjkxLTEwLjcgMS45OTMtMTYuMTg0IDEuNTUxLTMuMTI0LTQuNTI4LTYuNTE3LTEwLjU3Mi02Ljc0OC0xNC43OTEtLjUwNy01Ljc0MSAxLjg1Mi05LjgyNyA1Ljg5OC0xMC4yMTUgNC4wNDYtLjM4OCA5Ljc3OSAyLjkyMiAxMC4yODYgOC42NjN6bS02MC4wMDktOC44NjdjLS4zNjMtNS43NTIgNC44MDYtOS44ODcgOC44NjQtMTAuMTEzIDQuMDU5LS4yMjYgNy4wMDYgMy40NTggNy4zNjkgOS4yMS40MDcgNC4yMDctMi4wMzcgMTAuNjkzLTQuNDQ0IDE1LjY0LTUuMzU0IDEuMjYyLTEyLjIxOCAyLjIyMy0xNi4yMzMuOTAzLTUuNTMyLTEuNjE3LTguNDgtNS4zLTcuMzY4LTkuMjEgMS4xMS0zLjkxIDYuMjgtOC4wNDYgMTEuODEyLTYuNDN6bTI0Ljk4MyAyMi44MDRjLjYwMi0zLjgwOCA0LjU4LTUuNzUzIDcuMjYxLTUuMzA5IDIuNjgyLjQ0NSA0LjA2OCAzLjI4IDMuNDY2IDcuMDg2LS4zNDcgMi44MDUtMi44ODggNi42ODItNS4xOCA5LjU2LTMuNjguMDQ0LTguMy0uMzMtMTAuNzI4LTEuNzc4LTMuMzc1LTEuODYxLTQuNzYyLTQuNjk2LTMuNDY2LTcuMDg2IDEuMjk1LTIuMzkgNS4yNzItNC4zMzUgOC42NDctMi40NzN6bS00Mi4zMTYgOS4yNDFjMy40NDUtMS43MjggNy4zNDMuMzcyIDguNTQ0IDIuODEgMS4yIDIuNDQtLjI5NiA1LjIxNy0zLjc0MiA2Ljk0NS0yLjQ4MiAxLjM1MS03LjExNCAxLjU0NC0xMC43ODggMS4zNTdDNy4wOCA1My43IDQuNjk0IDQ5LjcyNiA0LjQ1NiA0Ni45MWMtLjQ1Mi0zLjgyOCAxLjA0NC02LjYwNiAzLjc0MS02Ljk0NSAyLjY5Ny0uMzQgNi41OTUgMS43NiA3LjA0OCA1LjU4OHoiLz48L3N2Zz4=) !important;\n    background-color: var(--blue-header-bg);\n}\n\n.blue-status-loading {\n    background-color: transparent;\n    box-shadow: none;\n}\n\n.spinner-bounce-circle > div::before {\n    content: \"❤️\";\n    font-size: 64px;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n}\n\n.spinner-bounce-circle div {\n    opacity: 1;\n    background-color: transparent;\n    animation-name: love-heart;\n    animation-duration: 1s;\n}\n\n.spinner-bounce-circle > div:nth-child(2) {\n    display: none;\n}\n\n@keyframes love-heart {\n    0% {\n        transform: scale(0.5);\n    }\n    50% {\n        transform: scale(1);\n    }\n    100% {\n        transform: scale(0.5);\n    }\n}\n\n"
    }];

    private void HandleCompile(Theme theme)
    {
        _css = theme.Css;
        _colorMode = theme.ThemeInfo?.ColorMode ?? "light";
    }
}